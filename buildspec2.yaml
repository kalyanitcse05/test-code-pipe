
version: 0.2
env:
  secrets-manager:
    AWS_ACCESS_KEY_ID: "devopskeys:AWS_ACCESS_KEY_ID"
    AWS_SECRET_ACCESS_KEY: "devopskeys:AWS_SECRET_ACCESS_KEY"
    AWS_DEFAULT_REGION: "devopskeys:AWS_DEFAULT_REGION"

phases:
 
  pre_build:
    commands:
      - ls
      - cd "$CODEBUILD_SRC_DIR"
      - echo $Name
      - echo $secretskeys
      - echo $AWS_ACCESS_KEY_ID
      

  build:
    commands:
      - ls -lrt   
      - terraform init 
      - terraform plan  

  post_build:
    commands:
      - echo terraform plan completed on `date`
